<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<CEP-Queries
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<Query name="NO2_Avg" text="@Priority(3) insert into NO2_Avg select a1.stationId as stationId, avg(a1.no2) as value, current_timestamp as timestamp from pattern [every a1 = AirMeasurement].win:time(30 sec) group by a1.stationId" />	
	<Query name="NO2_Hazardous" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 6 as levelNumber, 'NO2_Hazardous' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 1250.0 and a1.value &lt;= 2049.0)]" />
	<Query name="NO2_UnhealthyForSensitiveGroups" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 3 as levelNumber, 'NO2_UnhealthyForSensitiveGroups' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 101.0 and a1.value &lt; 361.0)]" />
	<Query name="NO2_Moderate" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 2 as levelNumber, 'NO2_Moderate' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 54.0 and a1.value &lt; 101.0)]" />
	<Query name="NO2_Unhealthy" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 4 as levelNumber, 'NO2_Unhealthy' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 361.0 and a1.value &lt; 650.0)]" />
	<Query name="NO2_VeryUnhealthy" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 5 as levelNumber, 'NO2_VeryUnhealthy' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 650.0 and a1.value &lt; 1250.0)]" />
	<Query name="NO2_Good" text="@Priority(2) insert into PollutantLevel select a1.stationId as stationId, 1 as levelNumber, 'NO2_Good' as levelName, current_timestamp as timestamp from pattern [every a1 = NO2_Avg (a1.value &gt;= 0.0 and a1.value &lt; 54.0)]" />
	<Query name="AirQualityLevel" text="@Priority(1) insert into AirQualityLevel select a1.stationId as stationId, max(a1.levelNumber) as level, current_timestamp as timestamp from pattern [every a1 = PollutantLevel].win:time_batch(3 sec) group by a1.stationId" />
</CEP-Queries>